---
title: "카메라 캘리브레이션 이해"
date: 2023-06-18 15:45:00 +0900
categories: 
    - CV
---

## **1. Calibration 이란 ?**

**교정 또는 보정**을 의미합니다.
사전적으로는 특정 표준 값을 기준으로, 환경이나 시간에 따라 달라진 차이를 인지하고 표준에 가깝게 오차를 조정하는 작업 입니다. 컴퓨터 비전에서 calibration은 쉽게 생각하면 다음의 문제를 해결하는 과정이
camera에 대한 calibration 이라고 할 수 있습니다.

1. 3차원 세상을 카메라의 2차원 이미지로 얻을때, 이 3차원 세상의 점들이 2차원 이미지의
   어디에 맺히는지 계산할 수 있는가 ?
2. 이미지에 상이 맺힐때, 카메라 내부의 기구적 영향을 반영할 수 있는가 ?



즉, **카메라에 대한 투영변환 매트릭스를 구하는 과정** 입니다.
위의 2가지 질문에 대한 해결은 아래와 같습니다.

1. 3차원 세상을 카메라의 2차원 이미지로 얻을때, 이 3차원 세상의 점들이 2차원 이미지의 어디에 맺히는지 계산할 수 있는가 ?

   > 카메라의 위치와 방향에 대한 변환 matrix 획득 : Extrinsic Matrix

2. 이미지에 상이 맺힐때, 카메라 내부의 기구적 영향을 반영할 수 있는가 ?

   > 렌즈 종류, 초점 거리, 렌즈 왜곡 등에 대한 파라미터 획득 : Intrinsic Matrix



정리하자면 다음과 같습니다. 카메라에 대한 calibration이란
**3차원에서 2차원으로의 투영변환 관계를 기하학적 관점에서 intrinsic matrix와 extrinsic matrix 등의 
파라미터를 통해 표현하는 것 or 그 파라미터를 추정하는 것**





## **2. Calibration Matrix 살펴보기**

![img](https://blog.kakaocdn.net/dn/TFBbx/btsizefgUGN/6ewEv5jRFlFg9gjxzwGAO1/img.png)

카메라 이미지는 3차원 공간의 점들을 2차원 이미지 센서의 평면위에 투사하여 얻습니다.
핀홀 카메라 모델에서 이 변환관계는 위의 '식1' 수식과 같이 표현됩니다.
**extrinsic matrix 는 3차원 세상의 좌표를 카메라 좌표계 기준으로 표현하는 것**입니다.

![img](https://blog.kakaocdn.net/dn/NJ1pH/btsiusFFwi6/1DX0VEQAau4drYPabZlG2K/img.png)



rotation 과 translation 두가지로 되있는데, 쉽게 생각하자면 월드 좌표계를 카메라 좌표계로 옮기는 것이죠.
즉, 월드 좌표계의 0,0 원점을 카메라 좌표계 기준 0,0으로 일치시키고 X,Y,Z 3축 역시 회전변환을 통해,
카메라 좌표계의 3축과 일치하도록 회전시켜 줍니다.
그럼 월드 좌표계 상의 점을 카메라 좌표계 기준으로 표현할 수 있습니다.
즉, **카메라가 설치된 높이, 방향(팬, 틸트) 등 카메라와 외부공간과의 기하학적 관계 표현**하는 것입니다.



이렇게 표현된 점이 카메라 렌즈를 통해 어떻게 카메라 내부의 2차원 이미지 센서에 점이 맺히는 가는
intrinsic matrix가 표현하는 영역입니다.

![img](https://blog.kakaocdn.net/dn/z9Z5w/btsitFFeZ6K/PxK0DAhnh8akX0XEv3akl1/img.png)



카메라의 내부 매트릭스를 구성하기 위한 파라미터는 fx, fy 의 초점거리, cx, cy 주점 등이 있습니다.
이떄 렌즈의 종류에 따라 파라미터가 추가 될수도 있는데, 예를 들면 어안렌즈와 같이 왜곡이 들어간 경우
접선왜곡 및 방사왜곡 모델이 추가될 수 있습니다.

다시 본론으로 돌아와서 정리를 하자면 **intrinsic matrix**를 구성하는 카메라 기구 내부적인 요소를 말하는 것입니다.
즉, **카메라 기준 좌표계로 표현된 월드 좌표점들이 2차원 이미지 센서에 투영될때 어떤 카메라 기구 내부적인 요소에 어떻게 영향 받을 것인가를 계산하는 식**이라 보시면 됩니다.

두 매트릭스는 궁극적으로 어떻게 3차원 세상의 점이 카메라 내부의 2차원 이미지 센서에 어디에 상이 맺히는가를 표현하기 위한 것이라고 볼 수 있습니다.



---
